"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[958],{6958:function(e,r,s){s.r(r),s.d(r,{default:function(){return y}});var a=s(4165),t=s(5861),o=s(9439),n=s(2791),i=s(6151),m=s(722),d=s(8870),l=s(890),c=s(9164),u=s(9658),g=s(7317),p=s(3239),h=s(7621),f=s(7689),x=s(2958),w=s(3108),v=s(2464),Z=s(184);function y(){var e=(0,n.useState)(),r=(0,o.Z)(e,2),s=r[0],y=r[1],j=(0,n.useState)(!1),b=(0,o.Z)(j,2),k=b[0],P=b[1],V=(0,n.useState)({title:{error:!1,message:""},address:{error:!1,message:""},description:{error:!1,message:""}}),W=(0,o.Z)(V,2),C=W[0],T=W[1],S=(0,f.s0)(),q=(0,x.x)(),A=q.sendRequest,D=q.error,F=q.setError,I=(0,n.useContext)(w.V),R=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(r){var s,t,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),s=new FormData(r.currentTarget),t=(0,v.mT)(s.get("title"),s.get("address"),s.get("description"),s.get("image")),o=t.updatedValue,!t.errorValidate){e.next=8;break}F("something wrong please check your image"),T(o),e.next=18;break;case 8:return e.prev=8,P(!0),e.next=12,A("https://cute-plum-cobra.cyclic.app/api/places","post",s,{Authorization:"Bearer ".concat(I.token)});case 12:S("/".concat(I.userId,"/places")),P(!1),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(8);case 18:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(r){return e.apply(this,arguments)}}();return(0,Z.jsxs)(Z.Fragment,{children:[D&&(0,Z.jsx)(c.Z,{sx:{my:4,display:"flex",justifyContent:"center"},children:(0,Z.jsxs)(u.Z,{severity:"error",variant:"filled",sx:{width:"40%"},children:[(0,Z.jsx)(g.Z,{children:"Error"}),D," \u2014 ",(0,Z.jsx)("strong",{children:"check it out!"})]})}),k?(0,Z.jsx)(c.Z,{sx:{my:4,display:"flex",justifyContent:"center"},children:(0,Z.jsx)(p.Z,{})}):(0,Z.jsx)(c.Z,{component:"main",maxWidth:"sm",children:(0,Z.jsxs)(h.Z,{sx:{display:"flex",alignItems:"center",flexDirection:"column"},children:[(0,Z.jsx)(l.Z,{component:"h1",variant:"h4",fontWeight:"bold",children:"Add Place"}),s&&(0,Z.jsx)("img",{src:s,alt:"",height:200}),(0,Z.jsxs)(d.Z,{component:"form",onSubmit:R,noValidate:!0,sx:{width:"80%"},children:[(0,Z.jsx)(l.Z,{variant:"body1",fontWeight:"bold",children:"Title"}),(0,Z.jsx)(m.Z,{error:C.title.error,helperText:C.title.message,margin:"normal",required:!0,fullWidth:!0,id:"title",name:"title"}),(0,Z.jsx)(l.Z,{variant:"body1",fontWeight:"bold",children:"Address"}),(0,Z.jsx)(m.Z,{error:C.address.error,helperText:C.address.message,margin:"normal",required:!0,fullWidth:!0,name:"address",id:"address"}),(0,Z.jsx)(l.Z,{variant:"body1",fontWeight:"bold",children:"description"}),(0,Z.jsx)(m.Z,{error:C.description.error,helperText:C.description.message,margin:"normal",required:!0,fullWidth:!0,name:"description",id:"description",multiline:!0,rows:4}),(0,Z.jsx)(m.Z,{type:"file",id:"image",name:"image",onChange:function(e){var r=e.target.files[0],s=new FileReader;s.onload=function(){y(s.result)},s.readAsDataURL(r)}}),(0,Z.jsx)(i.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,bgcolor:"orange"},children:"Create Place"})]})]})})]})}},2958:function(e,r,s){s.d(r,{x:function(){return m}});var a=s(4165),t=s(5861),o=s(9439),n=s(1243),i=s(2791),m=function(){var e=(0,i.useState)(!0),r=(0,o.Z)(e,2),s=r[0],m=r[1],d=(0,i.useState)(),l=(0,o.Z)(d,2),c=l[0],u=l[1],g=(0,i.useCallback)(function(){var e=(0,t.Z)((0,a.Z)().mark((function e(r){var s,t,o,i,d,l=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>1&&void 0!==l[1]?l[1]:"get",t=l.length>2&&void 0!==l[2]?l[2]:{},o=l.length>3&&void 0!==l[3]?l[3]:{},e.prev=3,e.next=6,(0,n.Z)({method:s,url:r,data:t,headers:o});case 6:return i=e.sent,e.abrupt("return",i.data);case 10:throw e.prev=10,e.t0=e.catch(3),d=e.t0.response?e.t0.response.data.message:e.t0.message,u(d),m(!1),e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(r){return e.apply(this,arguments)}}(),[]);return{isLoading:s,error:c,sendRequest:g,setIsLoading:m,setError:u}}},2464:function(e,r,s){s.d(r,{IU:function(){return a},mT:function(){return t},nc:function(){return o}});var a=function(e,r){var s={email:{error:!1,message:""},password:{error:!1,message:""}};return e?e.includes("@")||(s.email.error=!0,s.email.message="please use valid email"):(s.email.error=!0,s.email.message="email must not empty"),r?r.length<6&&(s.password.error=!0,s.password.message="min character length 6"):(s.password.error=!0,s.password.message="password must not empty"),s.email.error||s.email.password||(s={email:{error:!1,message:""},password:{error:!1,message:""}}),{updatedValue:s,errorValidate:s.email.error||s.password.error}},t=function(e,r,s,a){var t={title:{error:!1,message:""},address:{error:!1,message:""},description:{error:!1,message:""},image:{error:!1,message:""}};return e||(t.title.error=!0,t.title.message="title must not empty"),s?s.length<10&&(console.log(s),t.description.error=!0,t.description.message="min character length 10"):(t.description.error=!0,t.description.message="description must not empty"),r||(t.address.error=!0,t.address.message="address must not empty"),a||(t.image.error=!0,t.image.message="image must filled"),t.title.error||t.description.error||t.address.error||(t={title:{error:!1,message:""},address:{error:!1,message:""},description:{error:!1,message:""},image:{error:!1,message:""}}),{updatedValue:t,errorValidate:t.address.error||t.title.error||t.description.error}},o=function(e,r,s,a,t){var o={email:{error:!1,message:""},password:{error:!1,message:""},name:{error:!1,message:""},confirmPassword:{error:!1,message:""},image:{error:!1,message:""}};return r?r.includes("@")||(o.email.error=!0,o.email.message="please use valid email"):(o.email.error=!0,o.email.message="email must not empty"),e||(o.name.error=!0,o.name.message="name must not empty"),a?a!==s&&(o.confirmPassword.error=!0,o.confirmPassword.message="confirm password does not match"):(o.confirmPassword.error=!0,o.confirmPassword.message="confirm password must not empty"),s?s.length<6&&(o.password.error=!0,o.password.message="min character length 6"):(o.password.error=!0,o.password.message="password must not empty"),t||(o.image.error=!0,o.image.message="image must Filled"),o.name.error||o.email.error||o.password.error||o.confirmPassword.error||(o={email:{error:!1,message:""},password:{error:!1,message:""},name:{error:!1,message:""},confirmPassword:{error:!1,message:""},image:{error:!1,message:""}}),{updatedValue:o,errorValidate:o.email.error||o.password.error||o.name.error||o.confirmPassword.error}}}}]);
//# sourceMappingURL=958.d09cd718.chunk.js.map